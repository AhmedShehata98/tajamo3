import R from"./GQPUnmNe.js";import{c as x}from"./CtYnR-GE.js";import{d as b,a as c,b as u,G as y,u as p,L as g,h as a,r as v,j as t,l as _,B as w,C as V,E as A,F as S,D as E,k as s,t as i,x as H}from"./CMCxBn70.js";import{_ as K}from"./DKWuPxmd.js";import{Q as Y}from"./CmudrWh9.js";import{u as q}from"./M9v_ylco.js";import{u as z}from"./Cb26PGfG.js";import{b as J}from"./D2lfmPiW.js";import"./C7JPyPC4.js";const W=b({__name:"TableCaption",props:{class:{}},setup(r){const n=r;return(d,f)=>(u(),c("caption",{"data-slot":"table-caption",class:y(p(x)("text-muted-foreground mt-4 text-sm",n.class))},[g(d.$slots,"default")],2))}}),X=b({__name:"TableHead",props:{class:{}},setup(r){const n=r;return(d,f)=>(u(),c("th",{"data-slot":"table-head",class:y(p(x)("text-muted-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n.class))},[g(d.$slots,"default")],2))}}),Z=b({__name:"TableRow",props:{class:{}},setup(r){const n=r;return(d,f)=>(u(),c("tr",{"data-slot":"table-row",class:y(p(x)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",n.class))},[g(d.$slots,"default")],2))}}),ee=b({__name:"TableHeader",props:{class:{}},setup(r){const n=r;return(d,f)=>(u(),c("thead",{"data-slot":"table-header",class:y(p(x)("[&_tr]:border-b",n.class))},[g(d.$slots,"default")],2))}}),te=b({__name:"TableCell",props:{class:{}},setup(r){const n=r;return(d,f)=>(u(),c("td",{"data-slot":"table-cell",class:y(p(x)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n.class))},[g(d.$slots,"default")],2))}}),ae=b({__name:"TableBody",props:{class:{}},setup(r){const n=r;return(d,f)=>(u(),c("tbody",{"data-slot":"table-body",class:y(p(x)("[&_tr:last-child]:border-0",n.class))},[g(d.$slots,"default")],2))}}),le={"data-slot":"table-container",class:"relative w-full overflow-auto"},se=b({__name:"Table",props:{class:{}},setup(r){const n=r;return(d,f)=>(u(),c("div",le,[a("table",{"data-slot":"table",class:y(p(x)("w-full caption-bottom text-sm",n.class))},[g(d.$slots,"default")],2)]))}});function oe(r){switch(r){case"pending":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";case"refunded":return"bg-slate-200 text-slate-800";default:return"bg-gray-100 text-gray-800"}}const re={class:"relative w-full max-w-full flex-col flex items-start justify-start p-4 space-y-6"},ne={class:"w-full flex justify-between items-center"},de={class:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-dark transition-colors flex items-center gap-2"},ue={class:"w-full max-w-md"},ce={class:"relative"},ie={class:"absolute right-3 top-2.5 text-gray-400"},pe={class:"w-full flex gap-4 flex-wrap"},me=["value"],_e={class:"w-full flex overflow-hidden bg-card rounded-md p-2"},fe={class:"max-w-[calc(100vw-4rem)] lg:max-w-[calc(100vw-8rem)] xl:max-w-[calc(100vw-16rem)]"},be=["src"],ye={class:"inline-block text-sm font-semibold min-w-[10rem] max-w-[13rem] text-wrap"},Ue=b({__name:"index",setup(r){var D,C;const n=v(""),d=v(""),f=v(""),U=v(""),{userStore:h}=q(),{data:k,error:xe}=z(`/api/tickets/user/${(D=h.value)==null?void 0:D.id}`,{key:Y.TICKETS,method:"GET",watch:[()=>{var m;return(m=h.value)==null?void 0:m.id}],immediate:!!((C=h.value)!=null&&C.id)},"$FEP7flHuoe"),I=[{key:"id",label:"Ticket ID"},{key:"eventImage",label:"image"},{key:"eventName",label:"Event Name"},{key:"eventDateStart",label:"Event Start"},{key:"eventDateEnd",label:"Event End"},{key:"state",label:"State"},{key:"code",label:"Code"},{key:"totalAmount",label:"Total Amount"},{key:"ownerName",label:"Owner Name"},{key:"purchaseDate",label:"Purchase Date"},{key:"actions",label:"Actions"}],T=m=>new Date(m).toLocaleDateString("en-EG",{year:"numeric",month:"short",day:"2-digit"}),G=m=>new Intl.NumberFormat("en-EG",{style:"currency",currency:"EGP"}).format(m);return J({title:"Tickets - Dashboard",meta:[{name:"description",content:"Manage your tickets and view details in the dashboard."}]}),(m,l)=>{const N=R,j=W,L=X,$=Z,O=ee,o=te,M=K,P=ae,Q=se;return u(),c("div",re,[a("div",ne,[l[5]||(l[5]=a("h1",{class:"text-2xl font-bold text-text-primary"},"Tickets",-1)),a("button",de,[t(N,{name:"mdi:plus",class:"text-2xl"}),l[4]||(l[4]=_(" Add New Ticket "))])]),a("div",ue,[a("div",ce,[w(a("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),type:"text",placeholder:"Search by event name or ID...",class:"w-full px-4 py-2 bg-card border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none"},null,512),[[V,n.value]]),a("span",ie,[t(N,{name:"mdi:search",class:"text-2xl"})])])]),a("div",pe,[w(a("select",{"onUpdate:modelValue":l[1]||(l[1]=e=>d.value=e),class:"px-4 py-2 bg-card border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none"},[l[6]||(l[6]=a("option",{value:""},"All Events",-1)),(u(!0),c(S,null,E(m.uniqueEvents,e=>(u(),c("option",{key:e,value:e},i(e),9,me))),128))],512),[[A,d.value]]),w(a("select",{"onUpdate:modelValue":l[2]||(l[2]=e=>f.value=e),class:"px-4 py-2 bg-card border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none"},l[7]||(l[7]=[a("option",{value:""},"All States",-1),a("option",{value:"active"},"Active",-1),a("option",{value:"used"},"Used",-1),a("option",{value:"cancelled"},"Cancelled",-1)]),512),[[A,f.value]]),w(a("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>U.value=e),type:"date",class:"px-4 py-2 bg-card border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary outline-none"},null,512),[[V,U.value]])]),a("div",_e,[a("div",fe,[t(Q,null,{default:s(()=>[t(j,null,{default:s(()=>l[8]||(l[8]=[_(" Tickets ")])),_:1,__:[8]}),t(O,null,{default:s(()=>[t($,null,{default:s(()=>[(u(),c(S,null,E(I,e=>t(L,{key:e.key,class:"text-left"},{default:s(()=>[_(i(e.label),1)]),_:2},1024)),64))]),_:1})]),_:1}),t(P,null,{default:s(()=>[p(k)&&p(k).data.length>=1?(u(!0),c(S,{key:0},E(p(k).data,e=>(u(),H($,{key:e.id},{default:s(()=>[t(o,null,{default:s(()=>[_(i(`#${e.id}`),1)]),_:2},1024),t(o,null,{default:s(()=>[a("img",{class:"inline-block rounded-md object-cover",src:e.order_id.event_id.image,alt:"event-img"},null,8,be)]),_:2},1024),t(o,null,{default:s(()=>[a("strong",ye,i(e.order_id.event_id.name),1)]),_:2},1024),t(o,null,{default:s(()=>[_(i(T(e.order_id.event_id.start_at)),1)]),_:2},1024),t(o,null,{default:s(()=>[_(i(T(e.order_id.event_id.end_at)),1)]),_:2},1024),t(o,null,{default:s(()=>[a("span",{class:y([("OrderStateStyles"in m?m.OrderStateStyles:p(oe))(e.order_id.status),"px-2 py-1 shadow-sm uppercase rounded text-xs font-semibold"])},i(e.order_id.status),3)]),_:2},1024),t(o,null,{default:s(()=>[a("code",null,i(e.code),1)]),_:2},1024),t(o,null,{default:s(()=>[a("code",null,i(G(e.order_id.final_amount||0)),1)]),_:2},1024),t(o,null,{default:s(()=>{var B,F;return[_(i(`${(B=e.user_id)==null?void 0:B.first_name} ${(F=e.user_id)==null?void 0:F.last_name}`),1)]}),_:2},1024),t(o,null,{default:s(()=>[_(i(T(e.purchased_at)),1)]),_:2},1024),t(o,null,{default:s(()=>[t(M,{variant:"outline"},{default:s(()=>l[9]||(l[9]=[_("View")])),_:1,__:[9]})]),_:1})]),_:2},1024))),128)):(u(),H($,{key:1},{default:s(()=>[t(o),t(o),t(o),t(o,{class:"text-center text-gray-400 py-8 font-bold"},{default:s(()=>l[10]||(l[10]=[_(" No tickets found matching your criteria. ")])),_:1,__:[10]}),t(o),t(o),t(o)]),_:1}))]),_:1})]),_:1})])])])}}});export{Ue as default};
